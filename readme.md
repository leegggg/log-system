# 基于ELK的微服务日志管理系统的设计与实现

本文主要是从基于Elastic Stack的微服务日志管理系统的设计与实现入手，对每一步进行展开说明。近几年随着ElasticSearch的飞速发展，包含了ElasticSearch，logstash，各种Beats收集器在内的Elastic Stack系统在实际的生产中得到了广泛的应用。本系统主要使用ElasticSearch作为日志数据存储组件，利用Beats收集数据，利用logstash进行数据传递和处理，利用kafka作为数据缓存组件并且实现了Reatful的日志管理API以及其数据鉴权。最终完成了一个从数据采集到分析展示的完善系统，同时与MSCP微服务管理系统完成了集成工作，实现了一个用户友好的UI。在最后对系统进行了功能测试，证明了本系统的可用性。

本系统的出现，为MSCP云计算平台用户提供了统一的日志分析能力，降低了日志分析和处理的成本。同时方便了用户将其自己的日志系统接入。用户在本系统的基础上可以开发数据监控，行为分析，分类统计等多种功能。高吞吐，分布式的设计为数据产生价值提供了基础。

# 绪论
## 研究背景和意义
## 国内外研究现状
## 研究工作主要内容
## 论文组织架构
# 微服务日志管理技术概述
## 日志管理系统概述
## 微服务云平台
### MSCP平台
### MSCP平台日志特点和需求
## 日志管理平台
### Elastic stack
### kubernetes
### Journald
## 本章小结
# 日志系统设计
## 需求分析
### 日志系统特性 
### 分布式日志系统处理流程 
### 分布式日志系统功能需求和性能需求 
## 日志系统总体架构设计
## 日志系统云平台层设计
## 日志系统各组件设计
### 数据收集组件
### 数据清洗组件
### 数据缓存组件
### 数据存储组件
### 数据查询组件
### 前端UI
## (架构对比分析)
## 本章小结
# 日志系统设计
## 用户鉴权的实现
## 数据收集组件的实现
### 容器控制台日志的收集
#进行一些预处理，只保留来自docker容器的日志，和感兴趣的字段
### 容器内日志文件的收集
### 日志推送接口
## 数据清洗组件
##数据缓存组件
## 数据存储组件
## 数据查询和集群管理组件
## 前端UI
## 本章小结
# 日志系统测试
## 测试环境
### 软件环境
### 硬件环境
## 系统安装
### 安装ES集群（文件位于./kafka/elasticsearch）
#### 导入configmap
#### 创建service
#### 部署容器
### 部署kafka（文件位于./kafka/kafka）
### 部署logstash（文件位于./kafka/logstash）
### 部署Beats（文件位于./kafka/beats）
## 性能测试
### ElasticSearch性能测试
#### 测试方法
#### 测试基准
#### 纵向扩展
#### 水平扩展 
#### 其他可以提高Log系统性能的方案
### Kafka性能测试
## 功能测试
### Journald中的日志收集
### Logfile中的日志收集
### 日志推送
### 日志批量写入
### 日志查询
### 用户token签发
### 用户隔离日志写入
### 用户隔离日志读取
## 其他测试
### 高可用测试
### kafka水平扩展测试
# 本章小结
# 总结